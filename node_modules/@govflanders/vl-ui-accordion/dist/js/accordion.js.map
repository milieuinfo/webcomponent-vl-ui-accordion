{"version":3,"file":"accordion.js","sources":["../../src/js/accordion.js"],"sourcesContent":["/**\n * Private Variables\n */\nconst className = `js-${vl.ns}accordion`,\n  acOpenClassName = `${className}--open`,\n  acToggleClassName = `${className}__toggle`,\n  acToggleTextClassName = `.${acToggleClassName}__text`,\n  acDisabledClassName = `${vl.ns}step--disabled`,\n  acIconPlus = `${vl.ns}vi-plus`,\n  acIconMin = `${vl.ns}vi-minus`,\n  acContentClassName = `${vl.ns}accordion__content`,\n  dataPrefix = `data-${vl.ns}`,\n  acAtt = `${dataPrefix}accordion`,\n  acDressedAtt = `${acAtt}-dressed`,\n  acToggleAtt = `${acAtt}-toggle`;\n\nclass Accordion {\n  /**\n   * listener for hash in url\n   * @param  {DOM element} Accordion element\n   * @return {false}\n   */\n  _listenToHash(element) {\n    if (window.location.hash && element.hasAttribute('id')) {\n      if (`#${element.getAttribute('id')}` === window.location.hash) {\n        this.open(element);\n      }\n    }\n  }\n\n  /**\n   * open the accordion\n   * @param  {DOM element} Accordion element\n   * @return {false}\n   */\n  open(element) {\n    if(element.hasAttribute(acToggleAtt) && !vl.util.hasClass(element, acOpenClassName)){\n      element.click();\n    }\n  }\n\n  /**\n   * close the accordion\n   * @param  {DOM element} Accordion element\n   * @return {false}\n   */\n  close(element) {\n    if(element.hasAttribute(acToggleAtt) && vl.util.hasClass(element, acOpenClassName)){\n      element.click();\n    }\n  }\n\n  /**\n   * toggle the accordion\n   * @param  {DOM element} Accordion element\n   * @return {false}\n   */\n  toggle(element) {\n    if (element.hasAttribute(acToggleAtt))\n    element.click();\n  }\n\n  /**\n   * dress function for the accordion functionality\n   * @param  {DOM element} element\n   * @return {false}\n   */\n  dress(element) {\n    let toggle,\n      accordion,\n      accordionContent,\n      closedText,\n      openText,\n      accordionId = element.getAttribute('id') || vl.util.uniqueId(),\n      hiddenState = true;\n\n    element.setAttribute(acDressedAtt, true);\n    toggle = element.querySelector(acToggleTextClassName);\n\n    accordion = element.closest(`.${className}, [${acAtt}]`);\n\n    accordionContent = accordion.querySelector(`.${acContentClassName}`);\n\n    if(vl.util.exists(accordionContent)) {\n      accordionContent.setAttribute('aria-hidden', hiddenState);\n      element.setAttribute('aria-expanded', false);\n    }\n\n    if(toggle) {\n      closedText = toggle.dataset.vlAccordionCloseText;\n      openText = toggle.dataset.vlAccordionOpenText;\n\n      if(vl.util.hasClass(element, acOpenClassName)) {\n        toggle.innerHTML = closedText;\n      } else {\n        toggle.innerHTML = openText;\n      }\n\n      toggle.setAttribute('id', accordionId);\n    }\n\n    element.addEventListener(\n      'click',\n      event => {\n        let accordion;\n\n        event.preventDefault();\n\n        accordion = event.target.closest(`.${className}, [${acAtt}]`);\n\n        if(!vl.util.hasClass(element, acDisabledClassName)) {\n          hiddenState = !hiddenState;\n          vl.util.toggleClass(accordion, acOpenClassName);\n          element.setAttribute('aria-expanded', !hiddenState);\n\n          let openEvent = new CustomEvent('vl.accordion.hook.onChange', {\n              detail: !hiddenState,\n              target: accordion\n            }),\n            icon = element.querySelector('.vl-vi');\n\n          accordion.dispatchEvent(openEvent);\n\n          if(icon && vl.util.hasClass(icon, acIconPlus)) {\n            vl.util.removeClass(icon, acIconPlus);\n            vl.util.addClass(icon, acIconMin);\n          } else if(icon && vl.util.hasClass(icon, acIconMin)) {\n            vl.util.removeClass(icon, acIconMin);\n            vl.util.addClass(icon, acIconPlus);\n          }\n\n          if(vl.util.exists(accordionContent)) {\n            accordionContent.setAttribute('aria-hidden', hiddenState);\n          }\n\n          if(toggle) {\n            if(vl.util.hasClass(accordion, acOpenClassName)) {\n              toggle.innerHTML = toggle.dataset.vlAccordionCloseText;\n            } else {\n              toggle.innerHTML = toggle.dataset.vlAccordionOpenText;\n            }\n          }\n        }\n      },\n      false\n    );\n\n    this._listenToHash(element);\n\n    window.addEventListener('hashchange', () => {\n      this._listenToHash(element);\n    });\n  }\n\n  /**\n   * dressAll function for the accordion functionality\n   * @return {false}\n   */\n  dressAll() {\n    // get all accordion toggle elements\n    let elements = document.querySelectorAll(`\n      .${className}:not([data-vl-js-dress=\"false\"]) .${acToggleClassName}:not([${acDressedAtt}]),\n      [${acAtt}]:not([data-${vl.ns}js-dress=\"false\"]) [${acToggleAtt}]:not([${acDressedAtt}])\n    `);\n\n    // add functionality to the accordions\n    vl.util.each(elements, element => {\n      this.dress(element);\n    });\n  }\n}\n\nif (!('accordion' in vl)) {\n  vl.accordion = new Accordion();\n\n  document.addEventListener('DOMContentLoaded', () => {\n    vl.accordion.dressAll();\n  });\n}\n\nexport default Accordion;\n"],"names":["className","vl","ns","acOpenClassName","acToggleClassName","acToggleTextClassName","acDisabledClassName","acIconPlus","acIconMin","acContentClassName","dataPrefix","acAtt","acDressedAtt","acToggleAtt","Accordion","element","window","location","hash","hasAttribute","getAttribute","open","util","hasClass","click","toggle","accordion","accordionContent","closedText","openText","accordionId","uniqueId","hiddenState","setAttribute","querySelector","closest","exists","dataset","vlAccordionCloseText","vlAccordionOpenText","innerHTML","addEventListener","event","preventDefault","target","toggleClass","openEvent","CustomEvent","detail","icon","dispatchEvent","removeClass","addClass","_listenToHash","elements","document","querySelectorAll","each","dress","dressAll"],"mappings":"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"}